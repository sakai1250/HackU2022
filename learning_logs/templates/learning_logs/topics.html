{% extends 'learning_logs/base.html' %}
{% block content %}
<html>
<head>
<!-- jQuery 3.1.0 -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<!-- jQuery UI 1.12.1 -->
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">

<script type="text/javascript">
function put_result(){
    $("#result_box").empty();
	var id_order =[];
	$("#sortable").find(".jumbotron").each(function(index, element){
        id_order.push($(this).attr("id"));
	});
    $("#result_box").append(id_order+"<br />");
    return id_order;
}

$(function(){
	put_result();
	$("#sortable").sortable({
		axis: "y", // ドラッグの方向を縦に固定
		"opacity": 0.5, // ドラッグ中の透明度
		"update": function(event,ui){ // ドラッグ完了後のコールバック
			put_result();
		}
	});

});
</script>

<style>
#sortable li{
    list-style-type: none;
    padding: 0px;
}
#sortable  {

}
.handle{
    color: #990;
    padding: 10px;
}
</style>


</head>
<h1>To Do一覧</h1>
    {% for topic in topics %}
    <h3>
        <a href="{% url 'learning_logs:topic' topic.id %}">{{ topic }}</a>
    </h3>
    {% empty %}
    <h3>To Doはまだ作成されていません。</h3>
    {% endfor %}
<h3><a class="btn btn-lg btn-primary" href="{% url 'learning_logs:new_topic' %}" role="button">新規To Doを追加 &raquo;</a></h3>
<body>
<div class="card mt-5">
    <div id="result_box" class="card-body">
    </div>
</div>
<div id="sortable">
    <div class="jumbotron" id="a">
        <h3 class="display-4">
            <i class="handle fas fa-arrows-alt-v">
            </i>
            <div class="container">
                <nobr><font size="8">『{{ weather.city }}』</font><font size="5">の現在</font></nobr>
                {{ weather.description }}<img src="http://openweathermap.org/img/w/{{ weather.icon }}.png" alt="Image" width="200" height="200">
            </div>
        </h3>
        <a class="btn btn-lg btn-primary" href="{% url 'learning_logs:weather' %}" role="button">詳細 &raquo;</a>
    </div>

    <div class="jumbotron" id="b">
        <h3 class="display-4">
            <i class="handle fas fa-arrows-alt-v">
            </i>病気・ケガ
        </h3>
        <a class="btn btn-lg btn-primary" href="{% url 'users:register' %}" role="button">診断 &raquo;</a>
    </div>

    <div class="jumbotron" id="c">
        <h3 class="display-4">
            <i class="handle fas fa-arrows-alt-v">
            </i>To Do
        </h3>
        <a class="btn btn-lg btn-primary" href="{% url 'learning_logs:new_topic' %}" role="button">追加 &raquo;</a>
        <a class="btn btn-lg btn-primary" href="{% url 'learning_logs:test' %}" role="button">テスト（本番時に削除する） &raquo;</a>
    </div>

    <div class="jumbotron" id="d">
        <h3><i class="handle fas fa-arrows-alt-v">
        </i>Spotify 音楽 Top3
        </h3>
        <h4>
            {% for title, uri in zipmusic %}
            <li>
                <nobr>
                <a>曲名『{{ title }}』</a>URL: <a href="{{ uri }}" >{{ uri }}</a>
                </nobr>
            </li>
            {% endfor %}
        </h4>
    </div>

    <div class="jumbotron" id="e">
        <h3 class="display-4">
            <i class="handle fas fa-arrows-alt-v">
            </i>レシピ作成
        </h3>
        <a class="btn btn-lg btn-primary" href="{% url 'learning_logs:make_recipe' %}" role="button">食材を入力 &raquo;</a>
    </div>

</div>
</body>
</html>

{% endblock content %}